# List of all command needed to flash a HiKey 620 4GB device
pre_clone:
        - cmd: mkdir -p /tmp/test
        - cmd: echo $?
          exp: '0'

clone:
        - cmd: cd /tmp/test
        - cmd: /home/optee/bin/repo init -u https://github.com/jbech-linaro/manifest.git -b test
          exp: 'repo has been initialized in'
          timeout: 20
        - cmd: repo sync -j3
          exp: 'Fetching projects'
          timeout: 30
        - cmd: echo $?
          exp: '0'

post_clone:

pre_build:
        - cmd: mkdir -p /tmp/test/optee_client/build
        - cmd: echo $?
          exp: '0'
        - cmd: export PATH=:/home/optee/devel/reference/toolchains/aarch32/bin:$PATH
        - cmd: cd /tmp/test/optee_client/build
        - cmd: cmake -DCMAKE_C_COMPILER=arm-linux-gnueabihf-gcc -DCMAKE_INSTALL_PREFIX=/tmp/optee_client/install ..
          exp: 'Build files have been written to'
          timeout: 5
        - cmd: echo $?
          exp: '0'


build:
        - cmd: cd /tmp/test/optee_client/build
        - cmd: echo $?
          exp: '0'
        - cmd: export PATH=:/home/optee/devel/reference/toolchains/aarch32/bin:$PATH
        - cmd: make
          exp: 'Built target tee-supplicant'
          timeout: 15
        - cmd: echo $?
          exp: '0'

post_build:
        - cmd: cd /tmp/test/optee_client/build
          exp: 'HAB '
        - cmd: make install
        - cmd: echo $?
          exp: '0'
        - exp: 'HAB '

pre_flash:

flash:

post_flash:

pre_boot:

boot:

post_boot:

pre_test:

test:

post_test:
